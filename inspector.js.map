{"version":3,"file":"inspector.js","sources":["../lib-src/inspector/inspect.mts","../lib-src/inspector/context.mts","../lib-src/inspector/internal-utils.mts","../lib-src/inspector/methods.mts","../lib-src/inspector/utils.mts","../lib-src/inspector/index.mts"],"sourcesContent":["import type { Protocol } from 'devtools-protocol';\nimport {\n  BigIntValue,\n  Descriptor,\n  evalQ,\n  Get,\n  inspectDate,\n  IntrinsicsFunctionToString, isArrayBufferObject, isArrayExoticObject, IsCallable, isDataViewObject, isDateObject, isECMAScriptFunctionObject, isErrorObject, isIntegerIndex, isMapObject, isPromiseObject, isProxyExoticObject, isRegExpObject, isSetObject, isTypedArrayObject, isWeakMapObject, isWeakSetObject, JSStringValue, NumberValue, ObjectValue, PrivateElementRecord, PrivateName, R, surroundingAgent, SymbolDescriptiveString, SymbolValue, ToString, skipDebugger, Value, type ArrayBufferObject, type BooleanValue, type DataViewObject, type DateObject, type FunctionObject, type MapObject, type NullValue, type PromiseObject, type PropertyKeyValue, type ProxyObject, type RegExpObject, type SetObject, type TypedArrayObject, type UndefinedValue,\n  type WeakMapObject,\n  type WeakSetObject,\n} from '#self';\n\n/*\nTest code: copy this into the inspector console.\nprimitive: console.log('primitive:', null, undefined, true, false, 0, -0, NaN, Infinity, -Infinity, 1n, 'string', Symbol(), Symbol('text'), Symbol.for('global'), Symbol.iterator);\nfn: console.log('builtin:', eval, '\\nfunction:', function() { code }, '\\ngenerator:', function*() { code }, '\\nasync:', async function() { code }, '\\nasync generator:', async function*() { code }, '\\narrow:', () => { code }, '\\narrow async:', async () => { code });\n\nnormal: console.log('normal:', {}, new (class T { #a }), globalThis);\narraybuffer: console.log('arraybuffer:', new ArrayBuffer(8));\ndataview: console.log('dataview:', new DataView(new ArrayBuffer(8)));\nmap: console.log('map:', new Map(), new Map([[eval, globalThis], [1, 2]]));\nset: console.log('set:', new Set(), new Set([1, globalThis]));\nweakmap: console.log('weakmap:', new WeakMap(), new WeakMap([[{}, 1]]));\nweakset: console.log('weakset:', new WeakSet(), new WeakSet([{}]));\ndate: console.log('date:', new Date());\npromise: console.log('promise:', new Promise(() => {}), Promise.resolve(globalThis), Promise.reject(globalThis));\nproxy: {  const x = Proxy.revocable({}, {}); x.revoke(); console.log('proxy:', new Proxy({}, {}), new Proxy(function() {}, {}), x.proxy); }\nregexp: console.log('regexp:', /pattern/, new RegExp('pattern', 'g'));\narray: console.log('array:', [], [1, 2], Object.assign([1, 2], { a: 1 }), [0, ,,, 3]);\ntypedarray: console.log('typedarray:', new Int8Array(8), new Int16Array(8), new Int32Array(8), new Uint8Array(8), new Uint16Array(8), new Uint32Array(8), new Uint8ClampedArray(8), new Float32Array(8), new Float64Array(8), new BigInt64Array(8), new BigUint64Array(8));\n*/\ninterface Inspector<T extends Value> {\n    toRemoteObject(value: T, getObjectId: (val: SymbolValue | ObjectValue) => string): Protocol.Runtime.RemoteObject;\n    toObjectPreview(value: T): Protocol.Runtime.ObjectPreview;\n    toPropertyPreview(name: string, value: T): Protocol.Runtime.PropertyPreview;\n    toDescription(value: T): string;\n}\n\nconst Null: Inspector<NullValue> = {\n  toRemoteObject: () => ({ type: 'object', subtype: 'null', value: null }),\n  toObjectPreview: () => ({\n    type: 'object', subtype: 'null', properties: [], overflow: false,\n  }),\n  toPropertyPreview: (name) => ({\n    name, type: 'object', subtype: 'null', value: 'null',\n  }),\n  toDescription: () => '',\n};\n\nconst Undefined: Inspector<UndefinedValue> = {\n  toRemoteObject: () => ({ type: 'undefined' }),\n  toObjectPreview: () => ({\n    type: 'undefined', properties: [], overflow: false,\n  }),\n  toPropertyPreview: (name) => ({\n    name, type: 'undefined', value: 'undefined',\n  }),\n  toDescription: () => 'undefined',\n};\n\nconst Boolean: Inspector<BooleanValue> = {\n  toRemoteObject: (value) => ({ type: 'boolean', value: value.booleanValue() }),\n  toPropertyPreview: (name, value) => ({\n    name, type: 'boolean', value: value.booleanValue().toString(),\n  }),\n  toObjectPreview(value) {\n    return {\n      type: 'boolean',\n      value: value.booleanValue(),\n      description: value.booleanValue().toString(),\n      overflow: false,\n      properties: [],\n    };\n  },\n  toDescription: (value) => value.booleanValue().toString(),\n};\n\nconst Symbol: Inspector<SymbolValue> = {\n  toRemoteObject: (value, getObjectId) => ({\n    type: 'symbol',\n    description: SymbolDescriptiveString(value).stringValue(),\n    objectId: getObjectId(value),\n  }),\n  toPropertyPreview: (name, value) => ({\n    name, type: 'symbol', value: SymbolDescriptiveString(value).stringValue(),\n  }),\n  toObjectPreview: (value) => ({\n    type: 'symbol',\n    description: SymbolDescriptiveString(value).stringValue(),\n    overflow: false,\n    properties: [],\n  }),\n  toDescription: (value) => SymbolDescriptiveString(value).stringValue(),\n};\n\nconst String: Inspector<JSStringValue> = {\n  toRemoteObject: (value) => ({ type: 'string', value: value.stringValue() }),\n  toPropertyPreview(name, value) {\n    return {\n      name, type: 'string', value: value.stringValue(),\n    };\n  },\n  toObjectPreview(value) {\n    return {\n      type: 'string',\n      description: value.stringValue(),\n      overflow: false,\n      properties: [],\n    };\n  },\n  toDescription: (value) => value.stringValue(),\n};\n\nconst Number: Inspector<NumberValue> = {\n  toRemoteObject(value) {\n    const v = R(value);\n    let description = v.toString();\n    const isNeg0 = Object.is(v, -0);\n    // Includes values `-0`, `NaN`, `Infinity`, `-Infinity`, and bigint literals.\n    if (isNeg0 || !globalThis.Number.isFinite(v)) {\n      if (typeof v === 'bigint') {\n        description += 'n';\n        return { type: 'bigint', unserializableValue: description, description };\n      }\n      return { type: 'number', unserializableValue: description, description: isNeg0 ? '-0' : description };\n    }\n    return { type: 'number', value: v, description };\n  },\n  toPropertyPreview(name, value) {\n    return {\n      name, type: 'number', value: this.toDescription(value),\n    };\n  },\n  toObjectPreview(value) {\n    return {\n      type: 'number',\n      description: this.toDescription(value),\n      overflow: false,\n      properties: [],\n    };\n  },\n  toDescription: (value) => {\n    const r = R(value);\n    return value instanceof BigIntValue ? `${r}n` : r.toString();\n  },\n};\n\nconst Function: Inspector<FunctionObject> = {\n  toRemoteObject(value, getObjectId) {\n    const result: Protocol.Runtime.RemoteObject = {\n      type: 'function',\n      objectId: getObjectId(value),\n    };\n    result.description = IntrinsicsFunctionToString(value as FunctionObject);\n    if (isECMAScriptFunctionObject(value) && value.ECMAScriptCode) {\n      if (value.ECMAScriptCode.type === 'FunctionBody') {\n        result.className = 'Function';\n      } else if (value.ECMAScriptCode.type === 'GeneratorBody') {\n        result.className = 'GeneratorFunction';\n      } else if (value.ECMAScriptCode.type === 'AsyncBody') {\n        result.className = 'AsyncFunction';\n      } else if (value.ECMAScriptCode.type === 'AsyncGeneratorBody') {\n        result.className = 'AsyncGeneratorFunction';\n      }\n    } else {\n      result.className = 'Function';\n    }\n    return result;\n  },\n  toPropertyPreview: (name) => ({ name, type: 'function', value: '' }),\n  toObjectPreview(value) {\n    return {\n      type: 'function',\n      description: IntrinsicsFunctionToString(value),\n      overflow: false,\n      properties: [],\n    };\n  },\n  toDescription: () => 'Function',\n};\n\nclass ObjectInspector<T extends ObjectValue> implements Inspector<T> {\n  subtype;\n\n  className;\n\n  toDescription;\n\n  private toEntries;\n\n  private additionalProperties;\n\n  constructor(\n    className: string | ((value: Value) => string),\n    subtype: Protocol.Runtime.RemoteObject['subtype'],\n    toDescription: (value: T) => string,\n    additionalOptions?: {\n      entries?: (value: T) => Protocol.Runtime.ObjectPreview['entries'];\n      additionalProperties?: (value: T) => Iterable<[string, Value]>;\n    },\n  ) {\n    this.className = className;\n    this.subtype = subtype;\n    this.toDescription = toDescription;\n    this.toEntries = additionalOptions?.entries;\n    this.additionalProperties = additionalOptions?.additionalProperties;\n  }\n\n  toRemoteObject(value: T, getObjectId: (val: ObjectValue) => string): Protocol.Runtime.RemoteObject {\n    return {\n      type: 'object',\n      subtype: this.subtype,\n      objectId: getObjectId(value),\n      className: typeof this.className === 'string' ? this.className : this.className(value),\n      description: this.toDescription(value),\n      preview: this.toObjectPreview(value),\n    };\n  }\n\n  toPropertyPreview(name: string, value: T): Protocol.Runtime.PropertyPreview {\n    return {\n      name, type: 'object', subtype: this.subtype, value: this.toDescription(value),\n    };\n  }\n\n  toObjectPreview(value: T): Protocol.Runtime.ObjectPreview {\n    const e = this.toEntries?.(value);\n    return {\n      type: 'object',\n      subtype: this.subtype,\n      description: this.toDescription(value),\n      entries: e?.length ? e : undefined,\n      ...propertiesToPropertyPreview(value, this.additionalProperties?.(value)),\n    };\n  }\n}\nconst Default = new ObjectInspector<ObjectValue>('Object', undefined, () => 'Object');\n\nconst ArrayBuffer = new ObjectInspector<ArrayBufferObject>('ArrayBuffer', 'arraybuffer', (value) => `ArrayBuffer(${value.ArrayBufferByteLength})`);\nconst DataView = new ObjectInspector<DataViewObject>('DataView', 'dataview', (value) => `DataView(${value.ByteLength})`);\nconst Error = new ObjectInspector<ObjectValue>('SyntaxError', 'error', (value) => {\n  let text = '';\n  surroundingAgent.debugger_scopePreview(() => {\n    evalQ((Q) => {\n      if (value instanceof ObjectValue) {\n        const stack = Q(skipDebugger(Get(value, Value('stack'))));\n        if (stack !== Value.undefined) {\n          text += Q(skipDebugger(ToString(stack))).stringValue();\n        }\n      }\n    });\n  });\n  return text;\n});\n\nconst Map = new ObjectInspector<MapObject>('Map', 'map', (value) => `Map(${value.MapData.filter((x) => !!x.Key).length})`, {\n  additionalProperties: (value) => [['size', Value(value.MapData.filter((x) => !!x.Key).length)]],\n  entries: (value) => value.MapData.filter((x) => x.Key).map(({ Key, Value }) => ({\n    key: getInspector(Key!).toObjectPreview!(Key!),\n    value: getInspector(Value!).toObjectPreview!(Value!),\n  })),\n});\nconst Set = new ObjectInspector<SetObject>('Set', 'set', (value) => `Set(${value.SetData.filter(globalThis.Boolean).length})`, {\n  additionalProperties: (value) => [['size', Value(value.SetData.filter(globalThis.Boolean).length)]],\n  entries: (value) => value.SetData.filter(globalThis.Boolean).map((Value) => ({\n    value: getInspector(Value!).toObjectPreview!(Value!),\n  })),\n});\nconst WeakMap = new ObjectInspector<WeakMapObject>('WeakMap', 'weakmap', () => 'WeakMap', {\n  entries: (value) => value.WeakMapData.filter((x) => x.Key).map(({ Key, Value }) => ({\n    key: getInspector(Key!).toObjectPreview!(Key!),\n    value: getInspector(Value!).toObjectPreview!(Value!),\n  })),\n});\nconst WeakSet = new ObjectInspector<WeakSetObject>('WeakSet', 'weakset', () => 'WeakSet', {\n  entries: (value) => value.WeakSetData.filter(globalThis.Boolean).map((Value) => ({\n    value: getInspector(Value!).toObjectPreview!(Value!),\n  })),\n});\n\nconst Date = new ObjectInspector<DateObject>('Date', 'date', inspectDate);\nconst Promise = new ObjectInspector<PromiseObject>('Promise', 'promise', () => 'Promise', {\n  additionalProperties: (value) => [['[[PromiseState]]', Value(value.PromiseState)], ['[[PromiseResult]]', value.PromiseResult || Value.undefined]],\n});\nconst Proxy = new ObjectInspector<ProxyObject>('Proxy', 'proxy', (value) => {\n  if (IsCallable(value.ProxyTarget) === Value.true) {\n    return 'Proxy(Function)';\n  }\n  if (value.ProxyTarget instanceof ObjectValue) {\n    return 'Proxy(Object)';\n  }\n  return 'Proxy';\n});\nconst RegExp = new ObjectInspector<RegExpObject>('RegExp', 'regexp', (value) => `/${value.OriginalSource.stringValue()}/${value.OriginalFlags.stringValue()}`);\n\nconst Array: Inspector<ObjectValue> = {\n  toRemoteObject(value, getObjectId) {\n    return {\n      type: 'object',\n      className: 'Array',\n      subtype: 'array',\n      objectId: getObjectId(value),\n      description: getInspector(value).toDescription(value),\n      preview: this.toObjectPreview?.(value),\n    };\n  },\n  toPropertyPreview(name, value) {\n    return {\n      name, type: 'object', subtype: 'array', value: this.toDescription(value),\n    };\n  },\n  toObjectPreview(value) {\n    const result: Protocol.Runtime.ObjectPreview = {\n      type: 'object',\n      subtype: 'array',\n      overflow: false,\n      properties: [],\n      description: this.toDescription(value),\n    };\n    const indexProp: Protocol.Runtime.PropertyPreview[] = [];\n    const otherProp: Protocol.Runtime.PropertyPreview[] = [];\n    for (const [key, desc] of value.properties) {\n      if (indexProp.length > 100) {\n        result.overflow = true;\n        break;\n      }\n      if (isIntegerIndex(key)) {\n        indexProp.push(propertyToPropertyPreview(key, desc));\n      } else if (!(key instanceof JSStringValue && key.stringValue() === 'length')) {\n        otherProp.push(propertyToPropertyPreview(key, desc));\n      }\n    }\n    result.properties = indexProp.concat(otherProp).slice(0, 100);\n    return result;\n  },\n  toDescription(value) {\n    const length = [...value.properties.entries()].find(([key]) => key instanceof JSStringValue && key.stringValue() === 'length');\n    if (!length || !(length[1].Value instanceof NumberValue)) {\n      throw new TypeError('Bad ArrayExoticObject');\n    }\n    return `Array(${R(length[1].Value)})`;\n  },\n};\nconst TypedArray: Inspector<TypedArrayObject> = {\n  toRemoteObject(value, getObjectId) {\n    return {\n      type: 'object',\n      subtype: 'typedarray',\n      objectId: getObjectId(value),\n      className: value.TypedArrayName.stringValue(),\n      description: this.toDescription(value),\n      preview: this.toObjectPreview(value),\n    };\n  },\n  toObjectPreview(value) {\n    return {\n      type: 'object', subtype: 'typedarray', description: this.toDescription(value), properties: [], overflow: false,\n    };\n  },\n  toPropertyPreview(name, value) {\n    return {\n      name, type: 'object', subtype: 'typedarray', value: this.toDescription(value),\n    };\n  },\n  toDescription(value) {\n    const name = value.TypedArrayName;\n    return `${name.stringValue()}(${value.ArrayLength})`;\n  },\n};\n\nfunction propertyToPropertyPreview(key: PropertyKeyValue | PrivateName, desc: Descriptor | PrivateElementRecord): Protocol.Runtime.PropertyPreview {\n  let name;\n  if (key instanceof JSStringValue) {\n    name = key.stringValue();\n  } else if (key instanceof PrivateName) {\n    name = key.Description.stringValue();\n  } else {\n    name = SymbolDescriptiveString(key).stringValue();\n  }\n  if (desc.Get || desc.Set) {\n    return { name, type: 'accessor' };\n  } else {\n    return getInspector(desc.Value!).toPropertyPreview(name, desc.Value!);\n  }\n}\n\nfunction propertiesToPropertyPreview(value: ObjectValue, extra: undefined | Iterable<[string, Value]>, max = 5) {\n  let overflow = false;\n  const properties: Protocol.Runtime.PropertyPreview[] = [];\n  if (extra) {\n    for (const [key, value] of extra) {\n      properties.push(getInspector(value).toPropertyPreview(key, value));\n    }\n  }\n  for (const [key, desc] of value.properties) {\n    if (properties.length > max) {\n      overflow = true;\n      break;\n    }\n    properties.push(propertyToPropertyPreview(key, desc));\n  }\n  for (const desc of value.PrivateElements) {\n    if (properties.length > max) {\n      overflow = true;\n      break;\n    }\n    properties.push(propertyToPropertyPreview(desc.Key, desc));\n  }\n  return { overflow, properties };\n}\n\nexport function getInspector(value: Value): Inspector<Value> {\n  switch (true) {\n    case value === Value.null:\n      return Null;\n    case value === Value.undefined:\n      return Undefined;\n    case value === Value.true || value === Value.false:\n      return Boolean;\n    case value instanceof SymbolValue:\n      return Symbol;\n    case value instanceof JSStringValue:\n      return String;\n    case value instanceof NumberValue:\n    case value instanceof BigIntValue:\n      return Number;\n    case IsCallable(value) === Value.true:\n      return Function;\n    case isArrayExoticObject(value):\n      return Array;\n    case isRegExpObject(value):\n      return RegExp;\n    case isDateObject(value):\n      return Date;\n    case isMapObject(value):\n      return Map;\n    case isSetObject(value):\n      return Set;\n    case isWeakMapObject(value):\n      return WeakMap;\n    case isWeakSetObject(value):\n      return WeakSet;\n    // generator\n    case isErrorObject(value):\n      return Error;\n    case isProxyExoticObject(value):\n      return Proxy;\n    case isPromiseObject(value):\n      return Promise;\n    case isTypedArrayObject(value):\n      return TypedArray;\n    case isArrayBufferObject(value):\n      return ArrayBuffer;\n    case isDataViewObject(value):\n      return DataView;\n    default:\n      return Default;\n  }\n}\n","import type { Protocol } from 'devtools-protocol';\nimport { getInspector } from './inspect.mts';\nimport {\n  evalQ,\n  EnsureCompletion, IsPromise, JSStringValue, ManagedRealm, NullValue, ObjectValue, SymbolValue, ThrowCompletion, UndefinedValue, Value,\n  type PromiseObject,\n  getHostDefinedErrorStack,\n  skipDebugger,\n  type ValueCompletion,\n  getCurrentStack,\n  isECMAScriptFunctionObject,\n  SymbolDescriptiveString,\n  type EnvironmentRecordWithThisBinding,\n  EnvironmentRecord,\n  DeclarativeEnvironmentRecord,\n  ObjectEnvironmentRecord,\n  FunctionEnvironmentRecord,\n  GlobalEnvironmentRecord,\n  ModuleEnvironmentRecord,\n  OrdinaryObjectCreate,\n  Descriptor,\n  isArgumentExoticObject,\n} from '#self';\n\nexport class InspectorContext {\n  realm: ManagedRealm;\n\n  #idToObject = new Map<string, ObjectValue | SymbolValue>();\n\n  #objectToId = new Map<ObjectValue | SymbolValue, string>();\n\n  #objectCounter = 0;\n\n  constructor(realm: ManagedRealm) {\n    this.realm = realm;\n  }\n\n  #internObject(object: ObjectValue | SymbolValue, group = 'default') {\n    if (this.#objectToId.has(object)) {\n      return this.#objectToId.get(object)!;\n    }\n    const id = `${group}:${this.#objectCounter}`;\n    this.#objectCounter += 1;\n    this.#idToObject.set(id, object);\n    this.#objectToId.set(object, id);\n    return id;\n  }\n\n  releaseObject(id: string) {\n    const object = this.#idToObject.get(id);\n    if (object) {\n      this.#idToObject.delete(id);\n      this.#objectToId.delete(object);\n    }\n  }\n\n  releaseObjectGroup(group: string) {\n    for (const [id, object] of this.#idToObject.entries()) {\n      if (id.startsWith(group)) {\n        this.#idToObject.delete(id);\n        this.#objectToId.delete(object);\n      }\n    }\n  }\n\n  getObject(objectId: string) {\n    return this.#idToObject.get(objectId);\n  }\n\n  toRemoteObject(value: Value, options: { objectGroup?: string }): Protocol.Runtime.RemoteObject {\n    return getInspector(value).toRemoteObject(value, (val) => this.#internObject(val, options.objectGroup));\n  }\n\n  getProperties(object: ObjectValue): Protocol.Runtime.GetPropertiesResponse {\n    const wrap = (v: Value) => this.toRemoteObject(v, {});\n\n    const properties: Protocol.Runtime.PropertyDescriptor[] = [];\n    const internalProperties: Protocol.Runtime.InternalPropertyDescriptor[] = [];\n    const privateProperties: Protocol.Runtime.PrivatePropertyDescriptor[] = [];\n\n    object.PrivateElements.forEach((value) => {\n      privateProperties.push({\n        name: value.Key.Description.stringValue(),\n        value: value.Value ? wrap(value.Value) : undefined,\n        get: value.Get ? wrap(value.Get) : undefined,\n        set: value.Set ? wrap(value.Set) : undefined,\n      });\n    });\n\n    const value = evalQ((Q) => {\n      let p: NullValue | ObjectValue = object;\n      while (p instanceof ObjectValue) {\n        for (const key of Q(skipDebugger(p.OwnPropertyKeys()))) {\n          const desc = Q(skipDebugger(p.GetOwnProperty(key)));\n          // if (options.accessorPropertiesOnly && !IsAccessorDescriptor(desc)) {\n          //   continue;\n          // }\n          if (desc instanceof UndefinedValue) {\n            return;\n          }\n          const descriptor: Protocol.Runtime.PropertyDescriptor = {\n            name: key instanceof JSStringValue\n              ? key.stringValue()\n              : SymbolDescriptiveString(key).stringValue(),\n            value: desc.Value && !('HostUninitializedBindingMarkerObject' in desc.Value) ? wrap(desc.Value!) : undefined,\n            writable: desc.Writable === Value.true,\n            get: desc.Get ? wrap(desc.Get!) : undefined,\n            set: desc.Set ? wrap(desc.Set!) : undefined,\n            configurable: desc.Configurable === Value.true,\n            enumerable: desc.Enumerable === Value.true,\n            wasThrown: false,\n            isOwn: p === object,\n            symbol: key instanceof SymbolValue ? wrap(key) : undefined,\n          };\n          properties.push(descriptor);\n        }\n\n        // if (options.ownProperties) {\n        //   break;\n        // }\n        p = Q(skipDebugger(p.GetPrototypeOf()));\n      }\n    });\n    if (value.Type === 'throw') {\n      return {\n        result: [],\n        exceptionDetails: this.createExceptionDetails(value),\n      };\n    }\n\n    if (IsPromise(object) === Value.true) {\n      internalProperties.push({\n        name: '[[PromiseState]]',\n        value: {\n          type: 'string',\n          value: (object as PromiseObject).PromiseState,\n        },\n      });\n      internalProperties.push({\n        name: '[[PromiseResult]]',\n        value: wrap((object as PromiseObject).PromiseResult!),\n      });\n    }\n    if ('Prototype' in object) {\n      internalProperties.push({\n        name: '[[Prototype]]',\n        value: wrap(object.Prototype as Value),\n      });\n    }\n\n    return { result: properties, internalProperties, privateProperties };\n  }\n\n  createExceptionDetails(completion: ThrowCompletion | Value): Protocol.Runtime.ExceptionDetails {\n    const value = completion instanceof ThrowCompletion ? completion.Value : completion;\n    const stack = getHostDefinedErrorStack(value);\n    const frames: Protocol.Runtime.CallFrame[] = stack?.map((call) => call.toCallFrame()!).filter(Boolean) || [];\n    return {\n      text: 'Uncaught',\n      stackTrace: stack ? { callFrames: frames! } : undefined,\n      exception: getInspector(value).toRemoteObject(value, (val) => this.#internObject(val)),\n      lineNumber: frames[0]?.lineNumber || 0,\n      columnNumber: frames[0]?.columnNumber || 0,\n      exceptionId: 0,\n      scriptId: frames[0]?.scriptId,\n      url: frames[0]?.url,\n    };\n  }\n\n  createEvaluationResult(completion: ValueCompletion): Protocol.Runtime.EvaluateResponse {\n    completion = EnsureCompletion(completion);\n    if (!(completion.Value instanceof Value)) {\n      throw new RangeError('Invalid completion value');\n    }\n    return {\n      exceptionDetails: completion instanceof ThrowCompletion ? this.createExceptionDetails(completion) : undefined,\n      result: this.toRemoteObject(completion.Value, {}),\n    };\n  }\n\n  getDebuggerCallFrame(): Protocol.Debugger.CallFrame[] {\n    const stacks = getCurrentStack(false);\n    return stacks.map((stack, index): Protocol.Debugger.CallFrame => {\n      if (!stack.getScriptId()) {\n        return undefined!;\n      }\n      const scopeChain: Protocol.Debugger.Scope[] = [];\n      let env: EnvironmentRecord | NullValue = stack.context.LexicalEnvironment;\n      while (env instanceof EnvironmentRecord) {\n        const result = getDisplayObjectFromEnvironmentRecord(env);\n        if (result) {\n          scopeChain.push({ type: result.type, object: this.toRemoteObject(result.object, {}) });\n        }\n        env = env.OuterEnv;\n      }\n      return {\n        callFrameId: String(index),\n        functionName: stack.getFunctionName() || '<anonymous>',\n        location: {\n          scriptId: stack.getScriptId()!,\n          lineNumber: (stack.lineNumber || 1) - 1,\n          columnNumber: (stack.columnNumber || 1) - 1,\n        },\n        this: this.toRemoteObject(HostGetThisEnvironment(stack.context.LexicalEnvironment), {}),\n        url: stack.getSpecifier() || '',\n        canBeRestarted: false,\n        functionLocation: isECMAScriptFunctionObject(stack.context.Function) ? {\n          lineNumber: (stack.context.Function.ECMAScriptCode?.location.start.line || 1) - 1,\n          columnNumber: (stack.context.Function.ECMAScriptCode?.location.start.column || 1) - 1,\n          scriptId: stack.getScriptId() || '',\n        } : undefined,\n        scopeChain,\n      };\n    }).filter(Boolean);\n  }\n}\n\nfunction HostGetThisEnvironment(env: EnvironmentRecord | NullValue): Value {\n  while (!(env instanceof NullValue)) {\n    const exists = env.HasThisBinding();\n    if (exists === Value.true) {\n      const value = (env as EnvironmentRecordWithThisBinding).GetThisBinding();\n      if (value instanceof ThrowCompletion) {\n        return Value.undefined;\n      }\n      return value as Value;\n    }\n    const outer = env.OuterEnv;\n    env = outer;\n  }\n  throw new ReferenceError('No this environment found');\n}\n\nfunction getDisplayObjectFromEnvironmentRecord(record: EnvironmentRecord): undefined | { type: Protocol.Debugger.Scope['type'], object: ObjectValue } {\n  if (record instanceof DeclarativeEnvironmentRecord) {\n    const object = OrdinaryObjectCreate(Value.null, ['HostInspectorScopePreview']);\n    for (const [key, binding] of record.bindings) {\n      const value = binding.initialized ? binding.value! : OrdinaryObjectCreate(Value.null, ['HostUninitializedBindingMarkerObject']);\n      if (isArgumentExoticObject(value)) {\n        continue;\n      }\n      object.properties.set(key, Descriptor({\n        Enumerable: isArgumentExoticObject(value) ? Value.false : Value.true,\n        Value: value,\n        Writable: binding.mutable ? Value.true : Value.false,\n      }));\n    }\n    let type: Protocol.Debugger.Scope['type'] = 'block';\n    if (record instanceof FunctionEnvironmentRecord) {\n      type = 'local';\n    } else if (record instanceof ModuleEnvironmentRecord) {\n      type = 'module';\n    }\n    if (type !== 'local' && !object.properties.size) {\n      return undefined;\n    }\n    return { type, object };\n  } else if (record instanceof ObjectEnvironmentRecord) {\n    return { type: record.IsWithEnvironment === Value.true ? 'with' : 'global', object: record.BindingObject };\n  } else if (record instanceof GlobalEnvironmentRecord) {\n    return { type: 'global', object: record.GlobalThisValue };\n  }\n  throw new TypeError('Unknown environment record');\n}\n","import type { Protocol } from 'devtools-protocol';\nimport { type ScriptRecord } from '#self';\n\nexport function getParsedEvent(script: ScriptRecord, id: number, executionContextId: number): Protocol.Debugger.ScriptParsedEvent {\n  const lines = script.ECMAScriptCode.sourceText().split('\\n');\n  return {\n    scriptId: `${id}`,\n    url: script.HostDefined.specifier || `vm:///${id}`,\n    startLine: 0,\n    startColumn: 0,\n    endLine: lines.length,\n    endColumn: lines.pop()!.length,\n    executionContextId,\n    hash: '',\n    buildId: '',\n  };\n}\n\nexport const ParsedScripts: ScriptRecord[] = [];\n","import type { Protocol } from 'devtools-protocol';\nimport type {\n  DebuggerContext,\n  DebuggerNamespace, HeapProfilerNamespace, ProfilerNamespace, RuntimeNamespace,\n} from './types.mts';\nimport { getParsedEvent, ParsedScripts } from './internal-utils.mts';\nimport {\n  Call, NormalCompletion, ObjectValue, ParseScript, runJobQueue, surroundingAgent, ThrowCompletion, skipDebugger, Value, type FunctionObject,\n  type ScriptRecord,\n} from '#self';\n\nexport const Debugger: DebuggerNamespace = {\n  enable(_req, { onDebuggerAttached }) {\n    onDebuggerAttached();\n    return { debuggerId: 'debugger.0' };\n  },\n  getScriptSource({ scriptId }) {\n    const id = parseInt(scriptId, 10);\n    if (Number.isNaN(id)) {\n      return { scriptSource: '// Invalid script id' };\n    }\n    const record = ParsedScripts[id];\n    if (!record) {\n      return { scriptSource: '// Not found' };\n    }\n    return { scriptSource: record.ECMAScriptCode.sourceText() };\n  },\n  setAsyncCallStackDepth() { },\n  setBlackboxPatterns() { },\n  setPauseOnExceptions() { },\n  setBlackboxExecutionContexts() { },\n  setBreakpointByUrl() {\n    return { breakpointId: '0', locations: [] };\n  },\n  stepInto(_, { sendEvent }) {\n    sendEvent['Debugger.resumed']();\n    surroundingAgent.resumeEvaluate({ pauseAt: 'step-in' });\n  },\n  resume(_, { sendEvent }) {\n    sendEvent['Debugger.resumed']();\n    surroundingAgent.resumeEvaluate();\n  },\n  stepOver(_req, { sendEvent }) {\n    sendEvent['Debugger.resumed']();\n    surroundingAgent.resumeEvaluate({ pauseAt: 'step-over' });\n  },\n  stepOut(_req, { sendEvent }) {\n    sendEvent['Debugger.resumed']();\n    surroundingAgent.resumeEvaluate({ pauseAt: 'step-out' });\n  },\n  evaluateOnCallFrame(req, context) {\n    return evaluate(req, context);\n  },\n};\nexport const Profiler: ProfilerNamespace = {\n  enable() { },\n};\nexport const Runtime: RuntimeNamespace = {\n  discardConsoleEntries() { },\n  enable() {},\n  compileScript(options, { getContext, sendEvent }) {\n    const context = getContext(options.executionContextId);\n    const scriptId = ParsedScripts.length;\n    let rec!: ScriptRecord | ObjectValue[];\n    context.realm.scope(() => {\n      rec = ParseScript(options.expression, context.realm, { specifier: options.sourceURL, scriptId: options.persistScript ? String(scriptId) : undefined });\n    });\n    if (Array.isArray(rec)) {\n      const e = context.createExceptionDetails(ThrowCompletion(rec[0]));\n      // Note: it has to be this message to trigger devtools' line wrap.\n      e.exception!.description = 'SyntaxError: Unexpected end of input';\n      return { exceptionDetails: e };\n    }\n    if (options.persistScript) {\n      ParsedScripts.push(rec);\n      const event = getParsedEvent(rec, scriptId, options.executionContextId || 0);\n      sendEvent['Debugger.scriptParsed'](event);\n      return { scriptId: event.scriptId };\n    }\n    return {};\n  },\n  callFunctionOn(options, { getContext }) {\n    const context = getContext(options.executionContextId);\n    const { Value: F } = context.realm.evaluateScript(`(${options.functionDeclaration})`) as NormalCompletion<FunctionObject>;\n    const thisValue = options.objectId\n      ? context.getObject(options.objectId)!\n      : Value.undefined;\n    const args = options.arguments?.map((a) => {\n      if ('value' in a) {\n        return Value(a.value);\n      }\n      if (a.objectId) {\n        return context.getObject(a.objectId)!;\n      }\n      if ('unserializableValue' in a) {\n        throw new RangeError();\n      }\n      return Value.undefined;\n    });\n    const r = skipDebugger(Call(F, thisValue, args || []));\n    return context.createEvaluationResult(r);\n  },\n  evaluate(options, _context) {\n    return evaluate(options, _context);\n  },\n  getExceptionDetails(req, { getContext }) {\n    const context = getContext();\n    const object = context.getObject(req.errorObjectId)!;\n    if (object instanceof ObjectValue) {\n      return {\n        // @ts-expect-error\n        exceptionDetails: context.createExceptionDetails(ThrowCompletion(object), {}),\n      };\n    }\n    return {\n      exceptionDetails: {\n        text: 'unsupported', lineNumber: 0, columnNumber: 0, exceptionId: 0,\n      },\n    };\n  },\n  getHeapUsage() {\n    return {\n      usedSize: 0, totalSize: 0, backingStorageSize: 0, embedderHeapUsedSize: 0,\n    };\n  },\n  getIsolateId() {\n    return { id: 'isolate.0' };\n  },\n  getProperties(options, { getContext }) {\n    const context = getContext();\n    const object = context.getObject(options.objectId)!;\n    // @ts-expect-error\n    return context.getProperties(object, options);\n  },\n  globalLexicalScopeNames({ executionContextId }, { getContext }) {\n    const context = getContext(executionContextId);\n    const envRec = context.realm.GlobalEnv;\n    const names = Array.from(envRec.DeclarativeRecord.bindings.keys(), (v) => v.stringValue());\n    return { names };\n  },\n  releaseObject(req, { getContext }) {\n    getContext().releaseObject(req.objectId);\n  },\n  releaseObjectGroup({ objectGroup }, { getContext }) {\n    getContext().releaseObjectGroup(objectGroup);\n  },\n  runIfWaitingForDebugger() { },\n};\nexport const HeapProfiler: HeapProfilerNamespace = {\n  enable() { },\n  collectGarbage() { },\n};\n\nconst unsupportedError: Protocol.Runtime.EvaluateResponse = {\n  result: { type: 'undefined' },\n  exceptionDetails: {\n    text: 'unsupported', lineNumber: 0, columnNumber: 0, exceptionId: 0,\n  },\n};\nfunction evaluate(options: {\n  throwOnSideEffect?: boolean,\n  awaitPromise?: boolean,\n  contextId?: number | undefined,\n  callFrameId?: string,\n  expression: string,\n}, _context: DebuggerContext) {\n  const { getContext, preference } = _context;\n  const isPreview = options.throwOnSideEffect;\n  if (options.awaitPromise || (!preference.preview && isPreview)) {\n    return unsupportedError;\n  }\n\n  const context = getContext(options.contextId);\n  if (options.callFrameId) {\n    const frame = surroundingAgent.executionContextStack[options.callFrameId as `${number}`];\n    if (!frame) {\n      // eslint-disable-next-line no-console\n      console.error('Execution context not found: ', options.callFrameId);\n      return unsupportedError;\n    }\n    // const old = surroundingAgent.executionContextStack;\n  }\n  // TODO: introduce devtool scoping\n  if (isPreview) {\n    const completion = context.realm.evaluateScript(options.expression, { inspectorPreview: true });\n    return context.createEvaluationResult(completion);\n  } else {\n    const compileResult = Runtime.compileScript!({\n      expression: options.expression, executionContextId: options.contextId, persistScript: true, sourceURL: '',\n    }, _context);\n    if (compileResult.exceptionDetails) {\n      return { exceptionDetails: compileResult.exceptionDetails, result: { type: 'undefined' } } as Protocol.Runtime.EvaluateResponse;\n    }\n    const parsedScript = ParsedScripts[compileResult.scriptId! as `${number}`];\n    return new Promise<Protocol.Runtime.EvaluateResponse>((resolve) => {\n      context.realm.evaluate(parsedScript, (completion) => {\n        resolve(context.createEvaluationResult(completion));\n        runJobQueue();\n      });\n      surroundingAgent.resumeEvaluate();\n    });\n  }\n}\n","import type Protocol from 'devtools-protocol';\nimport { Inspector } from './index.mts';\nimport {\n  CreateBuiltinFunction, CreateDataProperty, CreateNonEnumerableDataPropertyOrThrow, DefinePropertyOrThrow, Descriptor, DetachArrayBuffer, isArrayBufferObject, NormalCompletion, OrdinaryObjectCreate, surroundingAgent, ThrowCompletion, skipDebugger, Value, type Arguments, type ManagedRealm,\n  type ValueEvaluator,\n} from '#self';\n\nconst consoleMethods = [\n  'log',\n  'debug',\n  'info',\n  'error',\n  'warning',\n  'dir',\n  'dirxml',\n  'table',\n  'trace',\n  'clear',\n  'startGroup',\n  'startGroupCollapsed',\n  'endGroup',\n  'assert',\n  'profile',\n  'profileEnd',\n  'count',\n  'timeEnd',\n] as const;\ntype ConsoleMethod = typeof consoleMethods[number];\nexport function createConsole(realm: ManagedRealm, defaultBehaviour: Partial<Record<ConsoleMethod, (args: Arguments) => void | NormalCompletion<void>>>) {\n  realm.scope(() => {\n    const console = OrdinaryObjectCreate(realm.Intrinsics['%Object.prototype%']);\n    skipDebugger(DefinePropertyOrThrow(\n      realm.GlobalObject,\n      Value('console'),\n      Descriptor({\n        Configurable: Value.true,\n        Enumerable: Value.false,\n        Writable: Value.true,\n        Value: console,\n      }),\n    ));\n    consoleMethods.forEach((method) => {\n      const f = CreateBuiltinFunction(\n        (args) => {\n          if (surroundingAgent.debugger_isPreviewing) {\n            return Value.undefined;\n          }\n          if (defaultBehaviour[method]) {\n            const completion = (defaultBehaviour[method](args));\n            if (completion instanceof ThrowCompletion) {\n              return completion;\n            }\n          }\n          if (realm.HostDefined.attachingInspector instanceof Inspector) {\n            realm.HostDefined.attachingInspector.console(realm, method as Protocol.Protocol.Runtime.ConsoleAPICalledEventType, args);\n          }\n          return Value.undefined;\n        },\n        1,\n        Value(method),\n        [],\n      );\n      skipDebugger(CreateDataProperty(console, Value(method), f));\n    });\n  });\n}\n\nexport function createInternals(realm: ManagedRealm) {\n  realm.scope(() => {\n    const $ = OrdinaryObjectCreate.from({\n      debugger: () => {\n        if (surroundingAgent.debugger_isPreviewing) {\n          return;\n        }\n        // eslint-disable-next-line no-debugger\n        debugger;\n      },\n      * detachArrayBuffer(object): ValueEvaluator {\n        if (!isArrayBufferObject(object)) {\n          return surroundingAgent.Throw('TypeError', 'Raw', 'Argument must be an ArrayBuffer');\n        }\n        const completion = DetachArrayBuffer(object);\n        if (completion instanceof ThrowCompletion) {\n          return completion;\n        }\n        return Value.undefined;\n      },\n    });\n    CreateNonEnumerableDataPropertyOrThrow(realm.GlobalObject, Value('$'), $);\n  });\n}\n","import type { Protocol } from 'devtools-protocol';\nimport { InspectorContext } from './context.mts';\nimport * as impl from './methods.mts';\nimport type { DebuggerContext, DebuggerPreference, DevtoolEvents } from './types.mts';\nimport { surroundingAgent, type Arguments, type ManagedRealm } from '#self';\n\nconst ignoreNamespaces = ['Network'];\nconst ignoreMethods: string[] = [];\n\nexport type { DebuggerPreference } from './types.mts';\nexport { createConsole, createInternals } from './utils.mts';\n\nexport abstract class Inspector {\n  protected abstract send(data: object): void;\n\n  readonly preference: DebuggerPreference = { preview: false, previewDebug: false };\n\n  #contexts: [InspectorContext, Protocol.Runtime.ExecutionContextDescription][] = [];\n\n  attachRealm(realm: ManagedRealm, name = 'engine262') {\n    const id = this.#contexts.length;\n    const desc: Protocol.Runtime.ExecutionContextDescription = {\n      id,\n      origin: 'vm://realm',\n      name,\n      uniqueId: '',\n    };\n    this.#contexts.push([new InspectorContext(realm), desc]);\n    realm.HostDefined.attachingInspector = this;\n\n    const oldOnDebugger = surroundingAgent.hostDefinedOptions.onDebugger;\n    surroundingAgent.hostDefinedOptions.onDebugger = () => {\n      this.sendEvent['Debugger.paused']({\n        reason: 'debugCommand',\n        callFrames: this.#context.getContext().getDebuggerCallFrame(),\n      });\n      oldOnDebugger?.();\n    };\n\n    this.#context.sendEvent['Runtime.executionContextCreated']({ context: desc });\n  }\n\n  #onDebuggerAttached() {\n    for (const [, context] of this.#contexts) {\n      this.sendEvent['Runtime.executionContextCreated']({ context });\n    }\n  }\n\n  protected onMessage(id: unknown, methodArg: string, params: unknown): void {\n    if (ignoreMethods.includes(methodArg)) {\n      return;\n    }\n    const [namespace, method] = methodArg.split('.');\n    if (ignoreNamespaces.includes(namespace)) {\n      return;\n    }\n    if (!(namespace in impl)) {\n      // eslint-disable-next-line no-console\n      console.error(`Unknown namespace requested: ${namespace}`);\n      return;\n    }\n    const ns = (impl as Record<string, object>)[namespace];\n    if (!(method in ns)) {\n      // eslint-disable-next-line no-console\n      console.error(`Unknown method requested: ${namespace}.${method}`);\n      return;\n    }\n\n    const f = (ns as Record<string, (args: unknown, context: DebuggerContext) => unknown>)[method];\n    new Promise((resolve) => {\n      resolve(f(params, this.#context));\n    }).then((result = {}) => {\n      this.send({ id, result });\n    });\n  }\n\n  sendEvent: DevtoolEvents = Object.create(new Proxy({}, {\n    get: (_, key: string) => {\n      const f = (params: Record<string, unknown>) => {\n        this.send({ method: key, params });\n      };\n      Object.defineProperty(this.sendEvent, key, { value: f });\n      return f;\n    },\n  }));\n\n  console(realm: ManagedRealm, type: Protocol.Runtime.ConsoleAPICalledEventType, args: Arguments) {\n    const context = this.#contexts.findIndex((c) => c[0].realm === realm);\n    this.sendEvent['Runtime.consoleAPICalled']({\n      type,\n      args: args.map((x) => this.#contexts[context][0].toRemoteObject(x, { })),\n      executionContextId: context,\n      timestamp: Date.now(),\n    });\n  }\n\n  #context: DebuggerContext = {\n    sendEvent: this.sendEvent,\n    preference: this.preference,\n    getContext: (id = 0) => this.#contexts.at(id)![0],\n    onDebuggerAttached: this.#onDebuggerAttached.bind(this),\n  };\n}\n"],"names":["Null","toRemoteObject","type","subtype","value","toObjectPreview","properties","overflow","toPropertyPreview","name","toDescription","Undefined","Boolean","booleanValue","toString","description","Symbol","getObjectId","SymbolDescriptiveString","stringValue","objectId","String","Number","v","R","isNeg0","Object","is","globalThis","isFinite","unserializableValue","r","BigIntValue","Function","result","IntrinsicsFunctionToString","isECMAScriptFunctionObject","ECMAScriptCode","className","ObjectInspector","toEntries","additionalProperties","constructor","additionalOptions","entries","preview","e","length","undefined","propertiesToPropertyPreview","Default","ArrayBuffer","ArrayBufferByteLength","DataView","ByteLength","Error","text","surroundingAgent","debugger_scopePreview","evalQ","Q","ObjectValue","stack","skipDebugger","Get","Value","ToString","Map","MapData","filter","x","Key","map","key","getInspector","Set","SetData","WeakMap","WeakMapData","WeakSet","WeakSetData","Date","inspectDate","Promise","PromiseState","PromiseResult","Proxy","IsCallable","ProxyTarget","true","RegExp","OriginalSource","OriginalFlags","Array","indexProp","otherProp","desc","isIntegerIndex","push","propertyToPropertyPreview","JSStringValue","concat","slice","find","NumberValue","TypeError","TypedArray","TypedArrayName","ArrayLength","PrivateName","Description","extra","max","PrivateElements","null","false","SymbolValue","isArrayExoticObject","isRegExpObject","isDateObject","isMapObject","isSetObject","isWeakMapObject","isWeakSetObject","isErrorObject","isProxyExoticObject","isPromiseObject","isTypedArrayObject","isArrayBufferObject","isDataViewObject","InspectorContext","realm","#internObject","object","group","has","get","id","set","releaseObject","delete","releaseObjectGroup","startsWith","getObject","options","val","objectGroup","getProperties","wrap","internalProperties","privateProperties","forEach","p","OwnPropertyKeys","GetOwnProperty","UndefinedValue","descriptor","writable","Writable","configurable","Configurable","enumerable","Enumerable","wasThrown","isOwn","symbol","GetPrototypeOf","Type","exceptionDetails","createExceptionDetails","IsPromise","Prototype","completion","ThrowCompletion","getHostDefinedErrorStack","frames","call","toCallFrame","stackTrace","callFrames","exception","lineNumber","columnNumber","exceptionId","scriptId","url","createEvaluationResult","EnsureCompletion","RangeError","getDebuggerCallFrame","stacks","getCurrentStack","index","getScriptId","scopeChain","env","context","LexicalEnvironment","EnvironmentRecord","getDisplayObjectFromEnvironmentRecord","OuterEnv","callFrameId","functionName","getFunctionName","location","this","HostGetThisEnvironment","getSpecifier","canBeRestarted","functionLocation","start","line","column","NullValue","exists","HasThisBinding","GetThisBinding","outer","ReferenceError","record","DeclarativeEnvironmentRecord","OrdinaryObjectCreate","binding","bindings","initialized","isArgumentExoticObject","Descriptor","mutable","FunctionEnvironmentRecord","ModuleEnvironmentRecord","size","ObjectEnvironmentRecord","IsWithEnvironment","BindingObject","GlobalEnvironmentRecord","GlobalThisValue","getParsedEvent","script","executionContextId","lines","sourceText","split","HostDefined","specifier","startLine","startColumn","endLine","endColumn","pop","hash","buildId","ParsedScripts","Debugger","enable","_req","onDebuggerAttached","debuggerId","getScriptSource","parseInt","isNaN","scriptSource","setAsyncCallStackDepth","setBlackboxPatterns","setPauseOnExceptions","setBlackboxExecutionContexts","setBreakpointByUrl","breakpointId","locations","stepInto","_","sendEvent","resumeEvaluate","pauseAt","resume","stepOver","stepOut","evaluateOnCallFrame","req","evaluate","Profiler","Runtime","discardConsoleEntries","compileScript","getContext","rec","scope","ParseScript","expression","sourceURL","persistScript","isArray","event","callFunctionOn","F","evaluateScript","functionDeclaration","thisValue","args","arguments","a","Call","_context","getExceptionDetails","errorObjectId","getHeapUsage","usedSize","totalSize","backingStorageSize","embedderHeapUsedSize","getIsolateId","globalLexicalScopeNames","envRec","GlobalEnv","names","from","DeclarativeRecord","keys","runIfWaitingForDebugger","HeapProfiler","collectGarbage","unsupportedError","preference","isPreview","throwOnSideEffect","awaitPromise","contextId","frame","executionContextStack","console","error","inspectorPreview","compileResult","parsedScript","resolve","runJobQueue","consoleMethods","createConsole","defaultBehaviour","Intrinsics","DefinePropertyOrThrow","GlobalObject","method","f","CreateBuiltinFunction","debugger_isPreviewing","attachingInspector","Inspector","CreateDataProperty","createInternals","$","debugger","detachArrayBuffer","Throw","DetachArrayBuffer","CreateNonEnumerableDataPropertyOrThrow","ignoreNamespaces","ignoreMethods","previewDebug","attachRealm","origin","uniqueId","oldOnDebugger","hostDefinedOptions","onDebugger","reason","#onDebuggerAttached","onMessage","methodArg","params","includes","namespace","impl","ns","then","send","create","defineProperty","findIndex","c","timestamp","now","at","bind"],"mappings":"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"}