{"version":3,"file":"inspector.mjs","sources":["../lib-src/inspector/inspect.mts","../lib-src/inspector/context.mts","../lib-src/inspector/internal-utils.mts","../lib-src/inspector/methods.mts","../lib-src/inspector/utils.mts","../lib-src/inspector/index.mts"],"sourcesContent":["import type { Protocol } from 'devtools-protocol';\nimport {\n  BigIntValue,\n  Descriptor,\n  evalQ,\n  Get,\n  inspectDate,\n  IntrinsicsFunctionToString, isArrayBufferObject, isArrayExoticObject, IsCallable, isDataViewObject, isDateObject, isECMAScriptFunctionObject, isErrorObject, isIntegerIndex, isMapObject, isPromiseObject, isProxyExoticObject, isRegExpObject, isSetObject, isTypedArrayObject, isWeakMapObject, isWeakSetObject, JSStringValue, NumberValue, ObjectValue, PrivateElementRecord, PrivateName, R, surroundingAgent, SymbolDescriptiveString, SymbolValue, ToString, skipDebugger, Value, type ArrayBufferObject, type BooleanValue, type DataViewObject, type DateObject, type FunctionObject, type MapObject, type NullValue, type PromiseObject, type PropertyKeyValue, type ProxyObject, type RegExpObject, type SetObject, type TypedArrayObject, type UndefinedValue,\n  type WeakMapObject,\n  type WeakSetObject,\n} from '#self';\n\n/*\nTest code: copy this into the inspector console.\nprimitive: console.log('primitive:', null, undefined, true, false, 0, -0, NaN, Infinity, -Infinity, 1n, 'string', Symbol(), Symbol('text'), Symbol.for('global'), Symbol.iterator);\nfn: console.log('builtin:', eval, '\\nfunction:', function() { code }, '\\ngenerator:', function*() { code }, '\\nasync:', async function() { code }, '\\nasync generator:', async function*() { code }, '\\narrow:', () => { code }, '\\narrow async:', async () => { code });\n\nnormal: console.log('normal:', {}, new (class T { #a }), globalThis);\narraybuffer: console.log('arraybuffer:', new ArrayBuffer(8));\ndataview: console.log('dataview:', new DataView(new ArrayBuffer(8)));\nmap: console.log('map:', new Map(), new Map([[eval, globalThis], [1, 2]]));\nset: console.log('set:', new Set(), new Set([1, globalThis]));\nweakmap: console.log('weakmap:', new WeakMap(), new WeakMap([[{}, 1]]));\nweakset: console.log('weakset:', new WeakSet(), new WeakSet([{}]));\ndate: console.log('date:', new Date());\npromise: console.log('promise:', new Promise(() => {}), Promise.resolve(globalThis), Promise.reject(globalThis));\nproxy: {  const x = Proxy.revocable({}, {}); x.revoke(); console.log('proxy:', new Proxy({}, {}), new Proxy(function() {}, {}), x.proxy); }\nregexp: console.log('regexp:', /pattern/, new RegExp('pattern', 'g'));\narray: console.log('array:', [], [1, 2], Object.assign([1, 2], { a: 1 }), [0, ,,, 3]);\ntypedarray: console.log('typedarray:', new Int8Array(8), new Int16Array(8), new Int32Array(8), new Uint8Array(8), new Uint16Array(8), new Uint32Array(8), new Uint8ClampedArray(8), new Float32Array(8), new Float64Array(8), new BigInt64Array(8), new BigUint64Array(8));\n*/\ninterface Inspector<T extends Value> {\n    toRemoteObject(value: T, getObjectId: (val: SymbolValue | ObjectValue) => string): Protocol.Runtime.RemoteObject;\n    toObjectPreview(value: T): Protocol.Runtime.ObjectPreview;\n    toPropertyPreview(name: string, value: T): Protocol.Runtime.PropertyPreview;\n    toDescription(value: T): string;\n}\n\nconst Null: Inspector<NullValue> = {\n  toRemoteObject: () => ({ type: 'object', subtype: 'null', value: null }),\n  toObjectPreview: () => ({\n    type: 'object', subtype: 'null', properties: [], overflow: false,\n  }),\n  toPropertyPreview: (name) => ({\n    name, type: 'object', subtype: 'null', value: 'null',\n  }),\n  toDescription: () => '',\n};\n\nconst Undefined: Inspector<UndefinedValue> = {\n  toRemoteObject: () => ({ type: 'undefined' }),\n  toObjectPreview: () => ({\n    type: 'undefined', properties: [], overflow: false,\n  }),\n  toPropertyPreview: (name) => ({\n    name, type: 'undefined', value: 'undefined',\n  }),\n  toDescription: () => 'undefined',\n};\n\nconst Boolean: Inspector<BooleanValue> = {\n  toRemoteObject: (value) => ({ type: 'boolean', value: value.booleanValue() }),\n  toPropertyPreview: (name, value) => ({\n    name, type: 'boolean', value: value.booleanValue().toString(),\n  }),\n  toObjectPreview(value) {\n    return {\n      type: 'boolean',\n      value: value.booleanValue(),\n      description: value.booleanValue().toString(),\n      overflow: false,\n      properties: [],\n    };\n  },\n  toDescription: (value) => value.booleanValue().toString(),\n};\n\nconst Symbol: Inspector<SymbolValue> = {\n  toRemoteObject: (value, getObjectId) => ({\n    type: 'symbol',\n    description: SymbolDescriptiveString(value).stringValue(),\n    objectId: getObjectId(value),\n  }),\n  toPropertyPreview: (name, value) => ({\n    name, type: 'symbol', value: SymbolDescriptiveString(value).stringValue(),\n  }),\n  toObjectPreview: (value) => ({\n    type: 'symbol',\n    description: SymbolDescriptiveString(value).stringValue(),\n    overflow: false,\n    properties: [],\n  }),\n  toDescription: (value) => SymbolDescriptiveString(value).stringValue(),\n};\n\nconst String: Inspector<JSStringValue> = {\n  toRemoteObject: (value) => ({ type: 'string', value: value.stringValue() }),\n  toPropertyPreview(name, value) {\n    return {\n      name, type: 'string', value: value.stringValue(),\n    };\n  },\n  toObjectPreview(value) {\n    return {\n      type: 'string',\n      description: value.stringValue(),\n      overflow: false,\n      properties: [],\n    };\n  },\n  toDescription: (value) => value.stringValue(),\n};\n\nconst Number: Inspector<NumberValue> = {\n  toRemoteObject(value) {\n    const v = R(value);\n    let description = v.toString();\n    const isNeg0 = Object.is(v, -0);\n    // Includes values `-0`, `NaN`, `Infinity`, `-Infinity`, and bigint literals.\n    if (isNeg0 || !globalThis.Number.isFinite(v)) {\n      if (typeof v === 'bigint') {\n        description += 'n';\n        return { type: 'bigint', unserializableValue: description, description };\n      }\n      return { type: 'number', unserializableValue: description, description: isNeg0 ? '-0' : description };\n    }\n    return { type: 'number', value: v, description };\n  },\n  toPropertyPreview(name, value) {\n    return {\n      name, type: 'number', value: this.toDescription(value),\n    };\n  },\n  toObjectPreview(value) {\n    return {\n      type: 'number',\n      description: this.toDescription(value),\n      overflow: false,\n      properties: [],\n    };\n  },\n  toDescription: (value) => {\n    const r = R(value);\n    return value instanceof BigIntValue ? `${r}n` : r.toString();\n  },\n};\n\nconst Function: Inspector<FunctionObject> = {\n  toRemoteObject(value, getObjectId) {\n    const result: Protocol.Runtime.RemoteObject = {\n      type: 'function',\n      objectId: getObjectId(value),\n    };\n    result.description = IntrinsicsFunctionToString(value as FunctionObject);\n    if (isECMAScriptFunctionObject(value) && value.ECMAScriptCode) {\n      if (value.ECMAScriptCode.type === 'FunctionBody') {\n        result.className = 'Function';\n      } else if (value.ECMAScriptCode.type === 'GeneratorBody') {\n        result.className = 'GeneratorFunction';\n      } else if (value.ECMAScriptCode.type === 'AsyncBody') {\n        result.className = 'AsyncFunction';\n      } else if (value.ECMAScriptCode.type === 'AsyncGeneratorBody') {\n        result.className = 'AsyncGeneratorFunction';\n      }\n    } else {\n      result.className = 'Function';\n    }\n    return result;\n  },\n  toPropertyPreview: (name) => ({ name, type: 'function', value: '' }),\n  toObjectPreview(value) {\n    return {\n      type: 'function',\n      description: IntrinsicsFunctionToString(value),\n      overflow: false,\n      properties: [],\n    };\n  },\n  toDescription: () => 'Function',\n};\n\nclass ObjectInspector<T extends ObjectValue> implements Inspector<T> {\n  subtype;\n\n  className;\n\n  toDescription;\n\n  private toEntries;\n\n  private additionalProperties;\n\n  constructor(\n    className: string | ((value: Value) => string),\n    subtype: Protocol.Runtime.RemoteObject['subtype'],\n    toDescription: (value: T) => string,\n    additionalOptions?: {\n      entries?: (value: T) => Protocol.Runtime.ObjectPreview['entries'];\n      additionalProperties?: (value: T) => Iterable<[string, Value]>;\n    },\n  ) {\n    this.className = className;\n    this.subtype = subtype;\n    this.toDescription = toDescription;\n    this.toEntries = additionalOptions?.entries;\n    this.additionalProperties = additionalOptions?.additionalProperties;\n  }\n\n  toRemoteObject(value: T, getObjectId: (val: ObjectValue) => string): Protocol.Runtime.RemoteObject {\n    return {\n      type: 'object',\n      subtype: this.subtype,\n      objectId: getObjectId(value),\n      className: typeof this.className === 'string' ? this.className : this.className(value),\n      description: this.toDescription(value),\n      preview: this.toObjectPreview(value),\n    };\n  }\n\n  toPropertyPreview(name: string, value: T): Protocol.Runtime.PropertyPreview {\n    return {\n      name, type: 'object', subtype: this.subtype, value: this.toDescription(value),\n    };\n  }\n\n  toObjectPreview(value: T): Protocol.Runtime.ObjectPreview {\n    const e = this.toEntries?.(value);\n    return {\n      type: 'object',\n      subtype: this.subtype,\n      description: this.toDescription(value),\n      entries: e?.length ? e : undefined,\n      ...propertiesToPropertyPreview(value, this.additionalProperties?.(value)),\n    };\n  }\n}\nconst Default = new ObjectInspector<ObjectValue>('Object', undefined, () => 'Object');\n\nconst ArrayBuffer = new ObjectInspector<ArrayBufferObject>('ArrayBuffer', 'arraybuffer', (value) => `ArrayBuffer(${value.ArrayBufferByteLength})`);\nconst DataView = new ObjectInspector<DataViewObject>('DataView', 'dataview', (value) => `DataView(${value.ByteLength})`);\nconst Error = new ObjectInspector<ObjectValue>('SyntaxError', 'error', (value) => {\n  let text = '';\n  surroundingAgent.debugger_scopePreview(() => {\n    evalQ((Q) => {\n      if (value instanceof ObjectValue) {\n        const stack = Q(skipDebugger(Get(value, Value('stack'))));\n        if (stack !== Value.undefined) {\n          text += Q(skipDebugger(ToString(stack))).stringValue();\n        }\n      }\n    });\n  });\n  return text;\n});\n\nconst Map = new ObjectInspector<MapObject>('Map', 'map', (value) => `Map(${value.MapData.filter((x) => !!x.Key).length})`, {\n  additionalProperties: (value) => [['size', Value(value.MapData.filter((x) => !!x.Key).length)]],\n  entries: (value) => value.MapData.filter((x) => x.Key).map(({ Key, Value }) => ({\n    key: getInspector(Key!).toObjectPreview!(Key!),\n    value: getInspector(Value!).toObjectPreview!(Value!),\n  })),\n});\nconst Set = new ObjectInspector<SetObject>('Set', 'set', (value) => `Set(${value.SetData.filter(globalThis.Boolean).length})`, {\n  additionalProperties: (value) => [['size', Value(value.SetData.filter(globalThis.Boolean).length)]],\n  entries: (value) => value.SetData.filter(globalThis.Boolean).map((Value) => ({\n    value: getInspector(Value!).toObjectPreview!(Value!),\n  })),\n});\nconst WeakMap = new ObjectInspector<WeakMapObject>('WeakMap', 'weakmap', () => 'WeakMap', {\n  entries: (value) => value.WeakMapData.filter((x) => x.Key).map(({ Key, Value }) => ({\n    key: getInspector(Key!).toObjectPreview!(Key!),\n    value: getInspector(Value!).toObjectPreview!(Value!),\n  })),\n});\nconst WeakSet = new ObjectInspector<WeakSetObject>('WeakSet', 'weakset', () => 'WeakSet', {\n  entries: (value) => value.WeakSetData.filter(globalThis.Boolean).map((Value) => ({\n    value: getInspector(Value!).toObjectPreview!(Value!),\n  })),\n});\n\nconst Date = new ObjectInspector<DateObject>('Date', 'date', inspectDate);\nconst Promise = new ObjectInspector<PromiseObject>('Promise', 'promise', () => 'Promise', {\n  additionalProperties: (value) => [['[[PromiseState]]', Value(value.PromiseState)], ['[[PromiseResult]]', value.PromiseResult || Value.undefined]],\n});\nconst Proxy = new ObjectInspector<ProxyObject>('Proxy', 'proxy', (value) => {\n  if (IsCallable(value.ProxyTarget) === Value.true) {\n    return 'Proxy(Function)';\n  }\n  if (value.ProxyTarget instanceof ObjectValue) {\n    return 'Proxy(Object)';\n  }\n  return 'Proxy';\n});\nconst RegExp = new ObjectInspector<RegExpObject>('RegExp', 'regexp', (value) => `/${value.OriginalSource.stringValue()}/${value.OriginalFlags.stringValue()}`);\n\nconst Array: Inspector<ObjectValue> = {\n  toRemoteObject(value, getObjectId) {\n    return {\n      type: 'object',\n      className: 'Array',\n      subtype: 'array',\n      objectId: getObjectId(value),\n      description: getInspector(value).toDescription(value),\n      preview: this.toObjectPreview?.(value),\n    };\n  },\n  toPropertyPreview(name, value) {\n    return {\n      name, type: 'object', subtype: 'array', value: this.toDescription(value),\n    };\n  },\n  toObjectPreview(value) {\n    const result: Protocol.Runtime.ObjectPreview = {\n      type: 'object',\n      subtype: 'array',\n      overflow: false,\n      properties: [],\n      description: this.toDescription(value),\n    };\n    const indexProp: Protocol.Runtime.PropertyPreview[] = [];\n    const otherProp: Protocol.Runtime.PropertyPreview[] = [];\n    for (const [key, desc] of value.properties) {\n      if (indexProp.length > 100) {\n        result.overflow = true;\n        break;\n      }\n      if (isIntegerIndex(key)) {\n        indexProp.push(propertyToPropertyPreview(key, desc));\n      } else if (!(key instanceof JSStringValue && key.stringValue() === 'length')) {\n        otherProp.push(propertyToPropertyPreview(key, desc));\n      }\n    }\n    result.properties = indexProp.concat(otherProp).slice(0, 100);\n    return result;\n  },\n  toDescription(value) {\n    const length = [...value.properties.entries()].find(([key]) => key instanceof JSStringValue && key.stringValue() === 'length');\n    if (!length || !(length[1].Value instanceof NumberValue)) {\n      throw new TypeError('Bad ArrayExoticObject');\n    }\n    return `Array(${R(length[1].Value)})`;\n  },\n};\nconst TypedArray: Inspector<TypedArrayObject> = {\n  toRemoteObject(value, getObjectId) {\n    return {\n      type: 'object',\n      subtype: 'typedarray',\n      objectId: getObjectId(value),\n      className: value.TypedArrayName.stringValue(),\n      description: this.toDescription(value),\n      preview: this.toObjectPreview(value),\n    };\n  },\n  toObjectPreview(value) {\n    return {\n      type: 'object', subtype: 'typedarray', description: this.toDescription(value), properties: [], overflow: false,\n    };\n  },\n  toPropertyPreview(name, value) {\n    return {\n      name, type: 'object', subtype: 'typedarray', value: this.toDescription(value),\n    };\n  },\n  toDescription(value) {\n    const name = value.TypedArrayName;\n    return `${name.stringValue()}(${value.ArrayLength})`;\n  },\n};\n\nfunction propertyToPropertyPreview(key: PropertyKeyValue | PrivateName, desc: Descriptor | PrivateElementRecord): Protocol.Runtime.PropertyPreview {\n  let name;\n  if (key instanceof JSStringValue) {\n    name = key.stringValue();\n  } else if (key instanceof PrivateName) {\n    name = key.Description.stringValue();\n  } else {\n    name = SymbolDescriptiveString(key).stringValue();\n  }\n  if (desc.Get || desc.Set) {\n    return { name, type: 'accessor' };\n  } else {\n    return getInspector(desc.Value!).toPropertyPreview(name, desc.Value!);\n  }\n}\n\nfunction propertiesToPropertyPreview(value: ObjectValue, extra: undefined | Iterable<[string, Value]>, max = 5) {\n  let overflow = false;\n  const properties: Protocol.Runtime.PropertyPreview[] = [];\n  if (extra) {\n    for (const [key, value] of extra) {\n      properties.push(getInspector(value).toPropertyPreview(key, value));\n    }\n  }\n  for (const [key, desc] of value.properties) {\n    if (properties.length > max) {\n      overflow = true;\n      break;\n    }\n    properties.push(propertyToPropertyPreview(key, desc));\n  }\n  for (const desc of value.PrivateElements) {\n    if (properties.length > max) {\n      overflow = true;\n      break;\n    }\n    properties.push(propertyToPropertyPreview(desc.Key, desc));\n  }\n  return { overflow, properties };\n}\n\nexport function getInspector(value: Value): Inspector<Value> {\n  switch (true) {\n    case value === Value.null:\n      return Null;\n    case value === Value.undefined:\n      return Undefined;\n    case value === Value.true || value === Value.false:\n      return Boolean;\n    case value instanceof SymbolValue:\n      return Symbol;\n    case value instanceof JSStringValue:\n      return String;\n    case value instanceof NumberValue:\n    case value instanceof BigIntValue:\n      return Number;\n    case IsCallable(value) === Value.true:\n      return Function;\n    case isArrayExoticObject(value):\n      return Array;\n    case isRegExpObject(value):\n      return RegExp;\n    case isDateObject(value):\n      return Date;\n    case isMapObject(value):\n      return Map;\n    case isSetObject(value):\n      return Set;\n    case isWeakMapObject(value):\n      return WeakMap;\n    case isWeakSetObject(value):\n      return WeakSet;\n    // generator\n    case isErrorObject(value):\n      return Error;\n    case isProxyExoticObject(value):\n      return Proxy;\n    case isPromiseObject(value):\n      return Promise;\n    case isTypedArrayObject(value):\n      return TypedArray;\n    case isArrayBufferObject(value):\n      return ArrayBuffer;\n    case isDataViewObject(value):\n      return DataView;\n    default:\n      return Default;\n  }\n}\n","import type { Protocol } from 'devtools-protocol';\nimport { getInspector } from './inspect.mts';\nimport {\n  evalQ,\n  EnsureCompletion, IsPromise, JSStringValue, ManagedRealm, NullValue, ObjectValue, SymbolValue, ThrowCompletion, UndefinedValue, Value,\n  type PromiseObject,\n  getHostDefinedErrorStack,\n  skipDebugger,\n  type ValueCompletion,\n  getCurrentStack,\n  isECMAScriptFunctionObject,\n  SymbolDescriptiveString,\n  type EnvironmentRecordWithThisBinding,\n  EnvironmentRecord,\n  DeclarativeEnvironmentRecord,\n  ObjectEnvironmentRecord,\n  FunctionEnvironmentRecord,\n  GlobalEnvironmentRecord,\n  ModuleEnvironmentRecord,\n  OrdinaryObjectCreate,\n  Descriptor,\n  isArgumentExoticObject,\n} from '#self';\n\nexport class InspectorContext {\n  realm: ManagedRealm;\n\n  #idToObject = new Map<string, ObjectValue | SymbolValue>();\n\n  #objectToId = new Map<ObjectValue | SymbolValue, string>();\n\n  #objectCounter = 0;\n\n  constructor(realm: ManagedRealm) {\n    this.realm = realm;\n  }\n\n  #internObject(object: ObjectValue | SymbolValue, group = 'default') {\n    if (this.#objectToId.has(object)) {\n      return this.#objectToId.get(object)!;\n    }\n    const id = `${group}:${this.#objectCounter}`;\n    this.#objectCounter += 1;\n    this.#idToObject.set(id, object);\n    this.#objectToId.set(object, id);\n    return id;\n  }\n\n  releaseObject(id: string) {\n    const object = this.#idToObject.get(id);\n    if (object) {\n      this.#idToObject.delete(id);\n      this.#objectToId.delete(object);\n    }\n  }\n\n  releaseObjectGroup(group: string) {\n    for (const [id, object] of this.#idToObject.entries()) {\n      if (id.startsWith(group)) {\n        this.#idToObject.delete(id);\n        this.#objectToId.delete(object);\n      }\n    }\n  }\n\n  getObject(objectId: string) {\n    return this.#idToObject.get(objectId);\n  }\n\n  toRemoteObject(value: Value, options: { objectGroup?: string }): Protocol.Runtime.RemoteObject {\n    return getInspector(value).toRemoteObject(value, (val) => this.#internObject(val, options.objectGroup));\n  }\n\n  getProperties(object: ObjectValue): Protocol.Runtime.GetPropertiesResponse {\n    const wrap = (v: Value) => this.toRemoteObject(v, {});\n\n    const properties: Protocol.Runtime.PropertyDescriptor[] = [];\n    const internalProperties: Protocol.Runtime.InternalPropertyDescriptor[] = [];\n    const privateProperties: Protocol.Runtime.PrivatePropertyDescriptor[] = [];\n\n    object.PrivateElements.forEach((value) => {\n      privateProperties.push({\n        name: value.Key.Description.stringValue(),\n        value: value.Value ? wrap(value.Value) : undefined,\n        get: value.Get ? wrap(value.Get) : undefined,\n        set: value.Set ? wrap(value.Set) : undefined,\n      });\n    });\n\n    const value = evalQ((Q) => {\n      let p: NullValue | ObjectValue = object;\n      while (p instanceof ObjectValue) {\n        for (const key of Q(skipDebugger(p.OwnPropertyKeys()))) {\n          const desc = Q(skipDebugger(p.GetOwnProperty(key)));\n          // if (options.accessorPropertiesOnly && !IsAccessorDescriptor(desc)) {\n          //   continue;\n          // }\n          if (desc instanceof UndefinedValue) {\n            return;\n          }\n          const descriptor: Protocol.Runtime.PropertyDescriptor = {\n            name: key instanceof JSStringValue\n              ? key.stringValue()\n              : SymbolDescriptiveString(key).stringValue(),\n            value: desc.Value && !('HostUninitializedBindingMarkerObject' in desc.Value) ? wrap(desc.Value!) : undefined,\n            writable: desc.Writable === Value.true,\n            get: desc.Get ? wrap(desc.Get!) : undefined,\n            set: desc.Set ? wrap(desc.Set!) : undefined,\n            configurable: desc.Configurable === Value.true,\n            enumerable: desc.Enumerable === Value.true,\n            wasThrown: false,\n            isOwn: p === object,\n            symbol: key instanceof SymbolValue ? wrap(key) : undefined,\n          };\n          properties.push(descriptor);\n        }\n\n        // if (options.ownProperties) {\n        //   break;\n        // }\n        p = Q(skipDebugger(p.GetPrototypeOf()));\n      }\n    });\n    if (value.Type === 'throw') {\n      return {\n        result: [],\n        exceptionDetails: this.createExceptionDetails(value),\n      };\n    }\n\n    if (IsPromise(object) === Value.true) {\n      internalProperties.push({\n        name: '[[PromiseState]]',\n        value: {\n          type: 'string',\n          value: (object as PromiseObject).PromiseState,\n        },\n      });\n      internalProperties.push({\n        name: '[[PromiseResult]]',\n        value: wrap((object as PromiseObject).PromiseResult!),\n      });\n    }\n    if ('Prototype' in object) {\n      internalProperties.push({\n        name: '[[Prototype]]',\n        value: wrap(object.Prototype as Value),\n      });\n    }\n\n    return { result: properties, internalProperties, privateProperties };\n  }\n\n  createExceptionDetails(completion: ThrowCompletion | Value): Protocol.Runtime.ExceptionDetails {\n    const value = completion instanceof ThrowCompletion ? completion.Value : completion;\n    const stack = getHostDefinedErrorStack(value);\n    const frames: Protocol.Runtime.CallFrame[] = stack?.map((call) => call.toCallFrame()!).filter(Boolean) || [];\n    return {\n      text: 'Uncaught',\n      stackTrace: stack ? { callFrames: frames! } : undefined,\n      exception: getInspector(value).toRemoteObject(value, (val) => this.#internObject(val)),\n      lineNumber: frames[0]?.lineNumber || 0,\n      columnNumber: frames[0]?.columnNumber || 0,\n      exceptionId: 0,\n      scriptId: frames[0]?.scriptId,\n      url: frames[0]?.url,\n    };\n  }\n\n  createEvaluationResult(completion: ValueCompletion): Protocol.Runtime.EvaluateResponse {\n    completion = EnsureCompletion(completion);\n    if (!(completion.Value instanceof Value)) {\n      throw new RangeError('Invalid completion value');\n    }\n    return {\n      exceptionDetails: completion instanceof ThrowCompletion ? this.createExceptionDetails(completion) : undefined,\n      result: this.toRemoteObject(completion.Value, {}),\n    };\n  }\n\n  getDebuggerCallFrame(): Protocol.Debugger.CallFrame[] {\n    const stacks = getCurrentStack(false);\n    return stacks.map((stack, index): Protocol.Debugger.CallFrame => {\n      if (!stack.getScriptId()) {\n        return undefined!;\n      }\n      const scopeChain: Protocol.Debugger.Scope[] = [];\n      let env: EnvironmentRecord | NullValue = stack.context.LexicalEnvironment;\n      while (env instanceof EnvironmentRecord) {\n        const result = getDisplayObjectFromEnvironmentRecord(env);\n        if (result) {\n          scopeChain.push({ type: result.type, object: this.toRemoteObject(result.object, {}) });\n        }\n        env = env.OuterEnv;\n      }\n      return {\n        callFrameId: String(index),\n        functionName: stack.getFunctionName() || '<anonymous>',\n        location: {\n          scriptId: stack.getScriptId()!,\n          lineNumber: (stack.lineNumber || 1) - 1,\n          columnNumber: (stack.columnNumber || 1) - 1,\n        },\n        this: this.toRemoteObject(HostGetThisEnvironment(stack.context.LexicalEnvironment), {}),\n        url: stack.getSpecifier() || '',\n        canBeRestarted: false,\n        functionLocation: isECMAScriptFunctionObject(stack.context.Function) ? {\n          lineNumber: (stack.context.Function.ECMAScriptCode?.location.start.line || 1) - 1,\n          columnNumber: (stack.context.Function.ECMAScriptCode?.location.start.column || 1) - 1,\n          scriptId: stack.getScriptId() || '',\n        } : undefined,\n        scopeChain,\n      };\n    }).filter(Boolean);\n  }\n}\n\nfunction HostGetThisEnvironment(env: EnvironmentRecord | NullValue): Value {\n  while (!(env instanceof NullValue)) {\n    const exists = env.HasThisBinding();\n    if (exists === Value.true) {\n      const value = (env as EnvironmentRecordWithThisBinding).GetThisBinding();\n      if (value instanceof ThrowCompletion) {\n        return Value.undefined;\n      }\n      return value as Value;\n    }\n    const outer = env.OuterEnv;\n    env = outer;\n  }\n  throw new ReferenceError('No this environment found');\n}\n\nfunction getDisplayObjectFromEnvironmentRecord(record: EnvironmentRecord): undefined | { type: Protocol.Debugger.Scope['type'], object: ObjectValue } {\n  if (record instanceof DeclarativeEnvironmentRecord) {\n    const object = OrdinaryObjectCreate(Value.null, ['HostInspectorScopePreview']);\n    for (const [key, binding] of record.bindings) {\n      const value = binding.initialized ? binding.value! : OrdinaryObjectCreate(Value.null, ['HostUninitializedBindingMarkerObject']);\n      if (isArgumentExoticObject(value)) {\n        continue;\n      }\n      object.properties.set(key, Descriptor({\n        Enumerable: isArgumentExoticObject(value) ? Value.false : Value.true,\n        Value: value,\n        Writable: binding.mutable ? Value.true : Value.false,\n      }));\n    }\n    let type: Protocol.Debugger.Scope['type'] = 'block';\n    if (record instanceof FunctionEnvironmentRecord) {\n      type = 'local';\n    } else if (record instanceof ModuleEnvironmentRecord) {\n      type = 'module';\n    }\n    if (type !== 'local' && !object.properties.size) {\n      return undefined;\n    }\n    return { type, object };\n  } else if (record instanceof ObjectEnvironmentRecord) {\n    return { type: record.IsWithEnvironment === Value.true ? 'with' : 'global', object: record.BindingObject };\n  } else if (record instanceof GlobalEnvironmentRecord) {\n    return { type: 'global', object: record.GlobalThisValue };\n  }\n  throw new TypeError('Unknown environment record');\n}\n","import type { Protocol } from 'devtools-protocol';\nimport { type ScriptRecord } from '#self';\n\nexport function getParsedEvent(script: ScriptRecord, id: number, executionContextId: number): Protocol.Debugger.ScriptParsedEvent {\n  const lines = script.ECMAScriptCode.sourceText().split('\\n');\n  return {\n    scriptId: `${id}`,\n    url: script.HostDefined.specifier || `vm:///${id}`,\n    startLine: 0,\n    startColumn: 0,\n    endLine: lines.length,\n    endColumn: lines.pop()!.length,\n    executionContextId,\n    hash: '',\n    buildId: '',\n  };\n}\n\nexport const ParsedScripts: ScriptRecord[] = [];\n","import type { Protocol } from 'devtools-protocol';\nimport type {\n  DebuggerContext,\n  DebuggerNamespace, HeapProfilerNamespace, ProfilerNamespace, RuntimeNamespace,\n} from './types.mts';\nimport { getParsedEvent, ParsedScripts } from './internal-utils.mts';\nimport {\n  Call, NormalCompletion, ObjectValue, ParseScript, runJobQueue, surroundingAgent, ThrowCompletion, skipDebugger, Value, type FunctionObject,\n  type ScriptRecord,\n} from '#self';\n\nexport const Debugger: DebuggerNamespace = {\n  enable(_req, { onDebuggerAttached }) {\n    onDebuggerAttached();\n    return { debuggerId: 'debugger.0' };\n  },\n  getScriptSource({ scriptId }) {\n    const id = parseInt(scriptId, 10);\n    if (Number.isNaN(id)) {\n      return { scriptSource: '// Invalid script id' };\n    }\n    const record = ParsedScripts[id];\n    if (!record) {\n      return { scriptSource: '// Not found' };\n    }\n    return { scriptSource: record.ECMAScriptCode.sourceText() };\n  },\n  setAsyncCallStackDepth() { },\n  setBlackboxPatterns() { },\n  setPauseOnExceptions() { },\n  setBlackboxExecutionContexts() { },\n  setBreakpointByUrl() {\n    return { breakpointId: '0', locations: [] };\n  },\n  stepInto(_, { sendEvent }) {\n    sendEvent['Debugger.resumed']();\n    surroundingAgent.resumeEvaluate({ pauseAt: 'step-in' });\n  },\n  resume(_, { sendEvent }) {\n    sendEvent['Debugger.resumed']();\n    surroundingAgent.resumeEvaluate();\n  },\n  stepOver(_req, { sendEvent }) {\n    sendEvent['Debugger.resumed']();\n    surroundingAgent.resumeEvaluate({ pauseAt: 'step-over' });\n  },\n  stepOut(_req, { sendEvent }) {\n    sendEvent['Debugger.resumed']();\n    surroundingAgent.resumeEvaluate({ pauseAt: 'step-out' });\n  },\n  evaluateOnCallFrame(req, context) {\n    return evaluate(req, context);\n  },\n};\nexport const Profiler: ProfilerNamespace = {\n  enable() { },\n};\nexport const Runtime: RuntimeNamespace = {\n  discardConsoleEntries() { },\n  enable() {},\n  compileScript(options, { getContext, sendEvent }) {\n    const context = getContext(options.executionContextId);\n    const scriptId = ParsedScripts.length;\n    let rec!: ScriptRecord | ObjectValue[];\n    context.realm.scope(() => {\n      rec = ParseScript(options.expression, context.realm, { specifier: options.sourceURL, scriptId: options.persistScript ? String(scriptId) : undefined });\n    });\n    if (Array.isArray(rec)) {\n      const e = context.createExceptionDetails(ThrowCompletion(rec[0]));\n      // Note: it has to be this message to trigger devtools' line wrap.\n      e.exception!.description = 'SyntaxError: Unexpected end of input';\n      return { exceptionDetails: e };\n    }\n    if (options.persistScript) {\n      ParsedScripts.push(rec);\n      const event = getParsedEvent(rec, scriptId, options.executionContextId || 0);\n      sendEvent['Debugger.scriptParsed'](event);\n      return { scriptId: event.scriptId };\n    }\n    return {};\n  },\n  callFunctionOn(options, { getContext }) {\n    const context = getContext(options.executionContextId);\n    const { Value: F } = context.realm.evaluateScript(`(${options.functionDeclaration})`) as NormalCompletion<FunctionObject>;\n    const thisValue = options.objectId\n      ? context.getObject(options.objectId)!\n      : Value.undefined;\n    const args = options.arguments?.map((a) => {\n      if ('value' in a) {\n        return Value(a.value);\n      }\n      if (a.objectId) {\n        return context.getObject(a.objectId)!;\n      }\n      if ('unserializableValue' in a) {\n        throw new RangeError();\n      }\n      return Value.undefined;\n    });\n    const r = skipDebugger(Call(F, thisValue, args || []));\n    return context.createEvaluationResult(r);\n  },\n  evaluate(options, _context) {\n    return evaluate(options, _context);\n  },\n  getExceptionDetails(req, { getContext }) {\n    const context = getContext();\n    const object = context.getObject(req.errorObjectId)!;\n    if (object instanceof ObjectValue) {\n      return {\n        // @ts-expect-error\n        exceptionDetails: context.createExceptionDetails(ThrowCompletion(object), {}),\n      };\n    }\n    return {\n      exceptionDetails: {\n        text: 'unsupported', lineNumber: 0, columnNumber: 0, exceptionId: 0,\n      },\n    };\n  },\n  getHeapUsage() {\n    return {\n      usedSize: 0, totalSize: 0, backingStorageSize: 0, embedderHeapUsedSize: 0,\n    };\n  },\n  getIsolateId() {\n    return { id: 'isolate.0' };\n  },\n  getProperties(options, { getContext }) {\n    const context = getContext();\n    const object = context.getObject(options.objectId)!;\n    // @ts-expect-error\n    return context.getProperties(object, options);\n  },\n  globalLexicalScopeNames({ executionContextId }, { getContext }) {\n    const context = getContext(executionContextId);\n    const envRec = context.realm.GlobalEnv;\n    const names = Array.from(envRec.DeclarativeRecord.bindings.keys(), (v) => v.stringValue());\n    return { names };\n  },\n  releaseObject(req, { getContext }) {\n    getContext().releaseObject(req.objectId);\n  },\n  releaseObjectGroup({ objectGroup }, { getContext }) {\n    getContext().releaseObjectGroup(objectGroup);\n  },\n  runIfWaitingForDebugger() { },\n};\nexport const HeapProfiler: HeapProfilerNamespace = {\n  enable() { },\n  collectGarbage() { },\n};\n\nconst unsupportedError: Protocol.Runtime.EvaluateResponse = {\n  result: { type: 'undefined' },\n  exceptionDetails: {\n    text: 'unsupported', lineNumber: 0, columnNumber: 0, exceptionId: 0,\n  },\n};\nfunction evaluate(options: {\n  throwOnSideEffect?: boolean,\n  awaitPromise?: boolean,\n  contextId?: number | undefined,\n  callFrameId?: string,\n  expression: string,\n}, _context: DebuggerContext) {\n  const { getContext, preference } = _context;\n  const isPreview = options.throwOnSideEffect;\n  if (options.awaitPromise || (!preference.preview && isPreview)) {\n    return unsupportedError;\n  }\n\n  const context = getContext(options.contextId);\n  if (options.callFrameId) {\n    const frame = surroundingAgent.executionContextStack[options.callFrameId as `${number}`];\n    if (!frame) {\n      // eslint-disable-next-line no-console\n      console.error('Execution context not found: ', options.callFrameId);\n      return unsupportedError;\n    }\n    // const old = surroundingAgent.executionContextStack;\n  }\n  // TODO: introduce devtool scoping\n  if (isPreview) {\n    const completion = context.realm.evaluateScript(options.expression, { inspectorPreview: true });\n    return context.createEvaluationResult(completion);\n  } else {\n    const compileResult = Runtime.compileScript!({\n      expression: options.expression, executionContextId: options.contextId, persistScript: true, sourceURL: '',\n    }, _context);\n    if (compileResult.exceptionDetails) {\n      return { exceptionDetails: compileResult.exceptionDetails, result: { type: 'undefined' } } as Protocol.Runtime.EvaluateResponse;\n    }\n    const parsedScript = ParsedScripts[compileResult.scriptId! as `${number}`];\n    return new Promise<Protocol.Runtime.EvaluateResponse>((resolve) => {\n      context.realm.evaluate(parsedScript, (completion) => {\n        resolve(context.createEvaluationResult(completion));\n        runJobQueue();\n      });\n      surroundingAgent.resumeEvaluate();\n    });\n  }\n}\n","import type Protocol from 'devtools-protocol';\nimport { Inspector } from './index.mts';\nimport {\n  CreateBuiltinFunction, CreateDataProperty, DefinePropertyOrThrow, Descriptor, NormalCompletion, OrdinaryObjectCreate, surroundingAgent, ThrowCompletion, skipDebugger, Value, type Arguments, type ManagedRealm,\n} from '#self';\n\nconst consoleMethods = [\n  'log',\n  'debug',\n  'info',\n  'error',\n  'warning',\n  'dir',\n  'dirxml',\n  'table',\n  'trace',\n  'clear',\n  'startGroup',\n  'startGroupCollapsed',\n  'endGroup',\n  'assert',\n  'profile',\n  'profileEnd',\n  'count',\n  'timeEnd',\n] as const;\ntype ConsoleMethod = typeof consoleMethods[number];\nexport function createConsole(realm: ManagedRealm, defaultBehaviour: Partial<Record<ConsoleMethod, (args: Arguments) => void | NormalCompletion<void>>>) {\n  realm.scope(() => {\n    const console = OrdinaryObjectCreate(realm.Intrinsics['%Object.prototype%']);\n    skipDebugger(DefinePropertyOrThrow(\n      realm.GlobalObject,\n      Value('console'),\n      Descriptor({\n        Configurable: Value.true,\n        Enumerable: Value.false,\n        Writable: Value.true,\n        Value: console,\n      }),\n    ));\n    consoleMethods.forEach((method) => {\n      const f = CreateBuiltinFunction(\n        (args) => {\n          if (surroundingAgent.debugger_isPreviewing) {\n            return Value.undefined;\n          }\n          if (defaultBehaviour[method]) {\n            const completion = (defaultBehaviour[method](args));\n            if (completion instanceof ThrowCompletion) {\n              return completion;\n            }\n          }\n          if (realm.HostDefined.attachingInspector instanceof Inspector) {\n            realm.HostDefined.attachingInspector.console(realm, method as Protocol.Protocol.Runtime.ConsoleAPICalledEventType, args);\n          }\n          return Value.undefined;\n        },\n        1,\n        Value(method),\n        [],\n      );\n      skipDebugger(CreateDataProperty(console, Value(method), f));\n    });\n  });\n}\n","import type { Protocol } from 'devtools-protocol';\nimport { InspectorContext } from './context.mts';\nimport * as impl from './methods.mts';\nimport type { DebuggerContext, DebuggerPreference, DevtoolEvents } from './types.mts';\nimport { surroundingAgent, type Arguments, type ManagedRealm } from '#self';\n\nconst ignoreNamespaces = ['Network'];\nconst ignoreMethods: string[] = [];\n\nexport type { DebuggerPreference } from './types.mts';\nexport { createConsole } from './utils.mts';\n\nexport abstract class Inspector {\n  protected abstract send(data: object): void;\n\n  readonly preference: DebuggerPreference = { preview: false, previewDebug: false };\n\n  #contexts: [InspectorContext, Protocol.Runtime.ExecutionContextDescription][] = [];\n\n  attachRealm(realm: ManagedRealm, name = 'engine262') {\n    const id = this.#contexts.length;\n    const desc: Protocol.Runtime.ExecutionContextDescription = {\n      id,\n      origin: 'vm://realm',\n      name,\n      uniqueId: '',\n    };\n    this.#contexts.push([new InspectorContext(realm), desc]);\n    realm.HostDefined.attachingInspector = this;\n\n    const oldOnDebugger = surroundingAgent.hostDefinedOptions.onDebugger;\n    surroundingAgent.hostDefinedOptions.onDebugger = () => {\n      this.sendEvent['Debugger.paused']({\n        reason: 'debugCommand',\n        callFrames: this.#context.getContext().getDebuggerCallFrame(),\n      });\n      oldOnDebugger?.();\n    };\n\n    this.#context.sendEvent['Runtime.executionContextCreated']({ context: desc });\n  }\n\n  #onDebuggerAttached() {\n    for (const [, context] of this.#contexts) {\n      this.sendEvent['Runtime.executionContextCreated']({ context });\n    }\n  }\n\n  protected onMessage(id: unknown, methodArg: string, params: unknown): void {\n    if (ignoreMethods.includes(methodArg)) {\n      return;\n    }\n    const [namespace, method] = methodArg.split('.');\n    if (ignoreNamespaces.includes(namespace)) {\n      return;\n    }\n    if (!(namespace in impl)) {\n      // eslint-disable-next-line no-console\n      console.error(`Unknown namespace requested: ${namespace}`);\n      return;\n    }\n    const ns = (impl as Record<string, object>)[namespace];\n    if (!(method in ns)) {\n      // eslint-disable-next-line no-console\n      console.error(`Unknown method requested: ${namespace}.${method}`);\n      return;\n    }\n\n    const f = (ns as Record<string, (args: unknown, context: DebuggerContext) => unknown>)[method];\n    new Promise((resolve) => {\n      resolve(f(params, this.#context));\n    }).then((result = {}) => {\n      this.send({ id, result });\n    });\n  }\n\n  sendEvent: DevtoolEvents = Object.create(new Proxy({}, {\n    get: (_, key: string) => {\n      const f = (params: Record<string, unknown>) => {\n        this.send({ method: key, params });\n      };\n      Object.defineProperty(this.sendEvent, key, { value: f });\n      return f;\n    },\n  }));\n\n  console(realm: ManagedRealm, type: Protocol.Runtime.ConsoleAPICalledEventType, args: Arguments) {\n    const context = this.#contexts.findIndex((c) => c[0].realm === realm);\n    this.sendEvent['Runtime.consoleAPICalled']({\n      type,\n      args: args.map((x) => this.#contexts[context][0].toRemoteObject(x, { })),\n      executionContextId: context,\n      timestamp: Date.now(),\n    });\n  }\n\n  #context: DebuggerContext = {\n    sendEvent: this.sendEvent,\n    preference: this.preference,\n    getContext: (id = 0) => this.#contexts.at(id)![0],\n    onDebuggerAttached: this.#onDebuggerAttached.bind(this),\n  };\n}\n"],"names":["Null","toRemoteObject","type","subtype","value","toObjectPreview","properties","overflow","toPropertyPreview","name","toDescription","Undefined","Boolean","booleanValue","toString","description","Symbol","getObjectId","SymbolDescriptiveString","stringValue","objectId","String","Number","v","R","isNeg0","Object","is","globalThis","isFinite","unserializableValue","r","BigIntValue","Function","result","IntrinsicsFunctionToString","isECMAScriptFunctionObject","ECMAScriptCode","className","ObjectInspector","toEntries","additionalProperties","constructor","additionalOptions","entries","preview","e","length","undefined","propertiesToPropertyPreview","Default","ArrayBuffer","ArrayBufferByteLength","DataView","ByteLength","Error","text","surroundingAgent","debugger_scopePreview","evalQ","Q","ObjectValue","stack","skipDebugger","Get","Value","ToString","Map","MapData","filter","x","Key","map","key","getInspector","Set","SetData","WeakMap","WeakMapData","WeakSet","WeakSetData","Date","inspectDate","Promise","PromiseState","PromiseResult","Proxy","IsCallable","ProxyTarget","true","RegExp","OriginalSource","OriginalFlags","Array","indexProp","otherProp","desc","isIntegerIndex","push","propertyToPropertyPreview","JSStringValue","concat","slice","find","NumberValue","TypeError","TypedArray","TypedArrayName","ArrayLength","PrivateName","Description","extra","max","PrivateElements","null","false","SymbolValue","isArrayExoticObject","isRegExpObject","isDateObject","isMapObject","isSetObject","isWeakMapObject","isWeakSetObject","isErrorObject","isProxyExoticObject","isPromiseObject","isTypedArrayObject","isArrayBufferObject","isDataViewObject","InspectorContext","realm","#internObject","object","group","has","get","id","set","releaseObject","delete","releaseObjectGroup","startsWith","getObject","options","val","objectGroup","getProperties","wrap","internalProperties","privateProperties","forEach","p","OwnPropertyKeys","GetOwnProperty","UndefinedValue","descriptor","writable","Writable","configurable","Configurable","enumerable","Enumerable","wasThrown","isOwn","symbol","GetPrototypeOf","Type","exceptionDetails","createExceptionDetails","IsPromise","Prototype","completion","ThrowCompletion","getHostDefinedErrorStack","frames","call","toCallFrame","stackTrace","callFrames","exception","lineNumber","columnNumber","exceptionId","scriptId","url","createEvaluationResult","EnsureCompletion","RangeError","getDebuggerCallFrame","stacks","getCurrentStack","index","getScriptId","scopeChain","env","context","LexicalEnvironment","EnvironmentRecord","getDisplayObjectFromEnvironmentRecord","OuterEnv","callFrameId","functionName","getFunctionName","location","this","HostGetThisEnvironment","getSpecifier","canBeRestarted","functionLocation","start","line","column","NullValue","exists","HasThisBinding","GetThisBinding","outer","ReferenceError","record","DeclarativeEnvironmentRecord","OrdinaryObjectCreate","binding","bindings","initialized","isArgumentExoticObject","Descriptor","mutable","FunctionEnvironmentRecord","ModuleEnvironmentRecord","size","ObjectEnvironmentRecord","IsWithEnvironment","BindingObject","GlobalEnvironmentRecord","GlobalThisValue","getParsedEvent","script","executionContextId","lines","sourceText","split","HostDefined","specifier","startLine","startColumn","endLine","endColumn","pop","hash","buildId","ParsedScripts","Debugger","enable","_req","onDebuggerAttached","debuggerId","getScriptSource","parseInt","isNaN","scriptSource","setAsyncCallStackDepth","setBlackboxPatterns","setPauseOnExceptions","setBlackboxExecutionContexts","setBreakpointByUrl","breakpointId","locations","stepInto","_","sendEvent","resumeEvaluate","pauseAt","resume","stepOver","stepOut","evaluateOnCallFrame","req","evaluate","Profiler","Runtime","discardConsoleEntries","compileScript","getContext","rec","scope","ParseScript","expression","sourceURL","persistScript","isArray","event","callFunctionOn","F","evaluateScript","functionDeclaration","thisValue","args","arguments","a","Call","_context","getExceptionDetails","errorObjectId","getHeapUsage","usedSize","totalSize","backingStorageSize","embedderHeapUsedSize","getIsolateId","globalLexicalScopeNames","envRec","GlobalEnv","names","from","DeclarativeRecord","keys","runIfWaitingForDebugger","HeapProfiler","collectGarbage","unsupportedError","preference","isPreview","throwOnSideEffect","awaitPromise","contextId","frame","executionContextStack","console","error","inspectorPreview","compileResult","parsedScript","resolve","runJobQueue","consoleMethods","createConsole","defaultBehaviour","Intrinsics","DefinePropertyOrThrow","GlobalObject","method","f","CreateBuiltinFunction","debugger_isPreviewing","attachingInspector","Inspector","CreateDataProperty","ignoreNamespaces","ignoreMethods","previewDebug","attachRealm","origin","uniqueId","oldOnDebugger","hostDefinedOptions","onDebugger","reason","#onDebuggerAttached","onMessage","methodArg","params","includes","namespace","impl","ns","then","send","create","defineProperty","findIndex","c","timestamp","now","at","bind"],"mappings":"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"}